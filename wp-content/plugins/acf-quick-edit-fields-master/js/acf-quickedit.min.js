var acfQuickedit={};!function(t){function e(e,i){var a={action:"get_acf_post_meta",post_id:e,acf_field_keys:[]};i.find("[data-acf-field-key]").each(function(){a.acf_field_keys.push(t(this).attr("data-acf-field-key")),t(this).prop("readonly",!0),t(this).is('[data-is-do-not-change="true"]')||(t(this).is('[type="radio"],[type="checkbox"]')?t(this).prop("checked",!1):t(this).parent().is(".acf-quick-edit-date_picker, .acf-quick-edit-time_picker, .acf-quick-edit-date_time_picker")?t(this).next('[type="text"]').prop("readonly",!0):t(this).val(""))}),t.post(ajaxurl,a,function(e){var a,n,d,c,o,r,f=[];for(i.find("[data-acf-field-key]").each(function(){var e;!c&&(c=t(this).closest("tr.inline-edit-post")),e=t(this).data("acf-field-key"),-1===f.indexOf(e)&&f.push(e)}),a=0;a<f.length;a++)n=f[a],d=e[n],o=t('[data-acf-field-key="'+n+'"]'),"boolean"==typeof d&&(d*=1),o.is(".acf-checkbox-list, .acf-radio-list")?(r=0,t.isArray(d)?t.each(d,function(t,e){r+=o.find('[value="'+e+'"]').prop("checked",!0).length}):r+=o.find('[value="'+d+'"]').prop("checked",!0).length,o.is(".other")&&!r&&(d?o.find('[value="other"]').prop("checked",!0):o.find('[type="text"]').val(""))):o.is('[type="radio"],[type="checkbox"]')||o.val(d),o.is('[type="password"]')||o.prop("readonly",!1),o.is("textarea")&&o.on("keydown keyup",function(t){13==t.which&&t.stopPropagation()}),o.parent().is(".acf-quick-edit-date_picker, .acf-quick-edit-time_picker, .acf-quick-edit-date_time_picker")&&o.next('[type="text"]').prop("readonly",!1);i.find("input.acf-quick-edit-color_picker").each(function(e,i){t(i).wpColorPicker()}),i.find(".acf-quick-edit-date_picker").each(function(e,i){acfQuickedit.datepicker.init(t(i))}),i.find(".acf-quick-edit-time_picker").each(function(e,i){acfQuickedit.timepicker.init(t(i))}),i.find(".acf-quick-edit-date_time_picker").each(function(e,i){acfQuickedit.datetimepicker.init(t(i))}),t("body > #ui-datepicker-div").length>0&&t("body > #ui-datepicker-div").wrap('<div class="acf-ui-datepicker" />')})}function i(e,i){var a=e.closest("form");acf.update("post_id",i),e.click(function(e){return!acf.validation.active||(acf.validation.ignore?(acf.validation.ignore=0,!0):(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),acf.validation.$trigger=t(this),acf.validation.fetch(a),!1))}),e.data("events").click.reverse()}var a;if(acfQuickedit.datepicker={init:function(e){var i=e.find('[type="hidden"]'),a=e.find('[type="text"]');args={dateFormat:e.data("date_format"),altFormat:"yymmdd",altField:i,changeYear:!0,yearRange:"-100:+100",changeMonth:!0,showButtonPanel:!0,firstDay:e.data("first_day")},date=t.datepicker.parseDate("yymmdd",i.val()),a.datepicker(args).datepicker("setDate",date).on("blur",function(){t(this).val()||i.val("")})}},acfQuickedit.timepicker={init:function(e){var i=e.find('[type="hidden"]'),a=e.find('[type="text"]'),n={timeFormat:e.data("time_format"),altTimeFormat:"HH:mm:ss",altField:i,altFieldTimeOnly:!1,showButtonPanel:!0,controlType:"select",oneLine:!0},d=t.datepicker.parseTime("HH:mm:ss",i.val());a.timepicker(n).on("blur",function(){t(this).val()||i.val("")}),i.val()&&a.val(t.datepicker.formatTime(e.data("time_format"),d))}},acfQuickedit.datetimepicker={init:function(e){var i=e.find('[type="hidden"]'),a=e.find('[type="text"]');altTimeFormat="HH:mm:ss",args={altField:i,dateFormat:e.data("date_format"),altFormat:"yy-mm-dd",timeFormat:e.data("time_format"),altTimeFormat:altTimeFormat,altFieldTimeOnly:!1,changeYear:!0,yearRange:"-100:+100",changeMonth:!0,showButtonPanel:!0,firstDay:e.data("first_day"),controlType:"select",oneLine:!0},datetime=t.datepicker.parseDateTime("yy-mm-dd",altTimeFormat,i.val()),a.datetimepicker(args).datepicker("setDate",datetime).on("blur",function(){t(this).val()||i.val("")})}},"undefined"!=typeof inlineEditPost){var n=inlineEditPost.edit;inlineEditPost.edit=function(a){var d,c;n.apply(this,arguments),d=0,"object"==typeof a&&(d=parseInt(this.getId(a))),c=t("#edit-"+d),e(d,t("#edit-"+d)),i(c.find("button.save"),d)}}if("undefined"!=typeof inlineEditTax){var d=inlineEditTax.edit;inlineEditTax.edit=function(a){var n,c,o=t('input[name="taxonomy"]').val();d.apply(this,arguments),n=0,"object"==typeof a&&(n=parseInt(this.getId(a))),c=t("#edit-"+n),e(o+"_"+n,c),i(c.find("button.save"),n)}}acf.validation.error_class="form-invalid",t(document).on("click",".bulkactions .button.action",function(i){var a=[];t("#bulk-edit #bulk-titles").children().each(function(){a.push(t(this).attr("id").replace(/^(ttle)/i,""))}),e(a,t("#bulk-edit"))}).on("change",'.acf-radio-list.other input[type="radio"]',function(e){var i=t(this),a=i.closest(".acf-radio-list"),n="other"==i.val(),d=a.find('[type="text"]').prop("disabled",!n);!!n&&d.focus()}).on("change",'[data-is-do-not-change="true"]',function(){var e,i=t(this),a=i.attr("name"),n=i.closest(".acf-checkbox-list");e=n.length?n.find('[type="checkbox"]:not([data-is-do-not-change])'):i.closest(".acf-field").find('[name="'+a+'"]:not([data-is-do-not-change])'),console.log(e),e.prop("disabled",i.prop("checked"))}).on("click",".inline-edit-col .select-media",function(e){var i,n=this,d=t(n).parent(".acf-input-wrap").find('[type="hidden"]'),c=t(this).closest(".acf-field"),o=acf.get("post_id");i={field:d.attr("data-acf-field-key"),multiple:!1,post_id:o,library:d.attr("data-library"),mode:"select",select:function(e,i){if(e){var a=t(n).parent(".acf-input-wrap").find('[type="hidden"]'),d=e.get("id");a.val(d)}}},e.preventDefault(),d.data("mime_types")&&(i.mime_types=d.data("mime_types")),c.is('[data-field-type="image"]')?i.type="image":i.type="",a=acf.media.popup(i),acf.isset(window,"wp","media","view","settings","post")&&t.isNumeric(o)&&(wp.media.view.settings.post.id=o)}).on("click",".inline-edit-col .remove-media",function(e){e.preventDefault();var i=t(this).parent().find('[type="hidden"]');i.val(""),console.log(i)})}(jQuery);
!function(e){e(".acf-qef-gallery-col").on("mousemove",function(n){var t=(e(this),e(this).find("img"));x=n.offsetX,num=t.length,step=e(this).width()/num,t.each(function(n,t){x>=step*n?e(t).show():e(t).hide()})})}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFjZi1xdWlja2VkaXQuanMiLCJ0aHVtYm5haWwtY29sLmpzIl0sIm5hbWVzIjpbImFjZlF1aWNrZWRpdCIsIiQiLCJnZXRfYWNmX3Bvc3RfZGF0YSIsInBvc3RfaWQiLCIkcGFyZW50IiwicmVxX2RhdGEiLCJhY3Rpb24iLCJhY2ZfZmllbGRfa2V5cyIsImZpbmQiLCJlYWNoIiwicHVzaCIsInRoaXMiLCJhdHRyIiwicHJvcCIsImlzIiwicGFyZW50IiwibmV4dCIsInZhbCIsInBvc3QiLCJhamF4dXJsIiwicmVzdWx0IiwiaSIsImtleSIsInZhbHVlIiwiJHRyIiwiJGZpZWxkIiwic2VsZWN0ZWQiLCJrZXlzIiwiY2xvc2VzdCIsImRhdGEiLCJpbmRleE9mIiwibGVuZ3RoIiwiaXNBcnJheSIsImlkeCIsIm9uIiwiZXZlbnQiLCJ3aGljaCIsInN0b3BQcm9wYWdhdGlvbiIsImVsIiwid3BDb2xvclBpY2tlciIsImRhdGVwaWNrZXIiLCJpbml0IiwidGltZXBpY2tlciIsImRhdGV0aW1lcGlja2VyIiwid3JhcCIsImJpbmRWYWxpZGF0aW9uIiwiJGJ1dHRvbiIsIm9iamVjdF9pZCIsIiRmb3JtIiwiYWNmIiwidXBkYXRlIiwiY2xpY2siLCJlIiwidmFsaWRhdGlvbiIsImFjdGl2ZSIsImlnbm9yZSIsInByZXZlbnREZWZhdWx0Iiwic3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uIiwiJHRyaWdnZXIiLCJmZXRjaCIsInJldmVyc2UiLCJtZWRpYV9mcmFtZSIsIiR3cmFwIiwiJGhpZGRlbiIsIiRpbnB1dCIsImFyZ3MiLCJkYXRlRm9ybWF0IiwiYWx0Rm9ybWF0IiwiYWx0RmllbGQiLCJjaGFuZ2VZZWFyIiwieWVhclJhbmdlIiwiY2hhbmdlTW9udGgiLCJzaG93QnV0dG9uUGFuZWwiLCJmaXJzdERheSIsImRhdGUiLCJwYXJzZURhdGUiLCJ0aW1lRm9ybWF0IiwiYWx0VGltZUZvcm1hdCIsImFsdEZpZWxkVGltZU9ubHkiLCJjb250cm9sVHlwZSIsIm9uZUxpbmUiLCJ0aW1lIiwicGFyc2VUaW1lIiwiZm9ybWF0VGltZSIsImRhdGV0aW1lIiwicGFyc2VEYXRlVGltZSIsImlubGluZUVkaXRQb3N0IiwiX3dwX2lubGluZV9lZGl0X3Bvc3QiLCJlZGl0IiwiaWQiLCJhcHBseSIsImFyZ3VtZW50cyIsInBhcnNlSW50IiwiZ2V0SWQiLCJpbmxpbmVFZGl0VGF4IiwiX3dwX2lubGluZV9lZGl0X3RheCIsInRheCIsImVycm9yX2NsYXNzIiwiZG9jdW1lbnQiLCJwb3N0X2lkcyIsImNoaWxkcmVuIiwicmVwbGFjZSIsIiR0aGlzIiwiJGxpc3QiLCJpc19vdGhlciIsIiRvdGhlciIsImZvY3VzIiwiJGl0ZW1zIiwiJHNlbGYiLCJuYW1lIiwiY29uc29sZSIsImxvZyIsIm1lZGlhRnJhbWVPcHRzIiwic2VsZiIsImdldCIsImZpZWxkIiwibXVsdGlwbGUiLCJsaWJyYXJ5IiwibW9kZSIsInNlbGVjdCIsImF0dGFjaG1lbnQiLCJtZWRpYV9pZCIsIm1pbWVfdHlwZXMiLCJ0eXBlIiwibWVkaWEiLCJwb3B1cCIsImlzc2V0Iiwid2luZG93IiwiaXNOdW1lcmljIiwid3AiLCJ2aWV3Iiwic2V0dGluZ3MiLCJqUXVlcnkiLCIkaW1nIiwieCIsIm9mZnNldFgiLCJudW0iLCJzdGVwIiwid2lkdGgiLCJzaG93IiwiaGlkZSJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBSUEsa0JBRUosU0FBVUMsR0FJVCxRQUFTQyxHQUFtQkMsRUFBVUMsR0FDckMsR0FBSUMsSUFDSEMsT0FBVyxvQkFDWEgsUUFBWUEsRUFDWkksa0JBRURILEdBQVFJLEtBQUssd0JBQXdCQyxLQUFLLFdBRXpDSixFQUFTRSxlQUFlRyxLQUFNVCxFQUFFVSxNQUFNQyxLQUFLLHVCQUUzQ1gsRUFBRVUsTUFBTUUsS0FBTSxZQUFZLEdBRW5CWixFQUFFVSxNQUFNRyxHQUFHLG9DQUNaYixFQUFFVSxNQUFNRyxHQUFHLG9DQUNmYixFQUFFVSxNQUFNRSxLQUFNLFdBQVcsR0FDZFosRUFBRVUsTUFBTUksU0FBU0QsR0FB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ZnJFLEVBQUVJLGlCQUdHTyxFQUFRbEMsS0FBSyxnQkFDakJtRixFQUFlVSxXQUFhM0QsRUFBUWxDLEtBQUssZUFFckNKLEVBQU9YLEdBQUcsNkJBQ2RrRyxFQUFlVyxLQUFPLFFBRXRCWCxFQUFlVyxLQUFPLEdBSXZCOUQsRUFBY1osSUFBSTJFLE1BQU1DLE1BQU9iLEdBSTFCL0QsSUFBSTZFLE1BQU1DLE9BQU8sS0FBSyxRQUFRLE9BQU8sV0FBVyxTQUFXOUgsRUFBRStILFVBQVU3SCxLQUUzRThILEdBQUdMLE1BQU1NLEtBQUtDLFNBQVNqSCxLQUFLdUUsR0FBS3RGLEtBS2xDK0IsR0FBSSxRQUFTLGlDQUFrQyxTQUFTa0IsR0FDeERBLEVBQUVJLGdCQUNGLElBQUlPLEdBQVU5RCxFQUFFVSxNQUFNSSxTQUFTUCxLQUFLLGtCQUNwQ3VELEdBQVE5QyxJQUFJLElBQ1o2RixRQUFRQyxJQUFJaEQsTUFFWHFFO0NDeFlILFNBQVVuSSxHQUNUQSxFQUFFLHdCQUF3QmlDLEdBQUcsWUFBWSxTQUFTa0IsR0FDakQsR0FDQ2lGLElBRFdwSSxFQUFFVSxNQUNOVixFQUFFVSxNQUFNSCxLQUFLLE9BQ3BCOEgsR0FBS2xGLEVBQUVtRixRQUNQQyxJQUFPSCxFQUFLdEcsT0FDWjBHLEtBQU94SSxFQUFFVSxNQUFNK0gsUUFBVUYsSUFFMUJILEVBQUs1SCxLQUFNLFNBQVNZLEVBQUVpQixHQUNqQmdHLEdBQUtHLEtBQUtwSCxFQUNicEIsRUFBRXFDLEdBQUlxRyxPQUVOMUksRUFBRXFDLEdBQUlzRyxZQUlQUiIsImZpbGUiOiJhY2YtcXVpY2tlZGl0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBhY2ZRdWlja2VkaXQgPSB7fTtcblxuKGZ1bmN0aW9uKCQpIHtcblxuXHR2YXIgbWVkaWFfZnJhbWU7XG5cblx0ZnVuY3Rpb24gZ2V0X2FjZl9wb3N0X2RhdGEoIHBvc3RfaWQgLCAkcGFyZW50ICkge1xuXHRcdHZhciByZXFfZGF0YSA9IHtcblx0XHRcdCdhY3Rpb24nIDogJ2dldF9hY2ZfcG9zdF9tZXRhJyxcblx0XHRcdCdwb3N0X2lkJyA6IHBvc3RfaWQsXG5cdFx0XHQnYWNmX2ZpZWxkX2tleXMnIDogW11cblx0XHR9O1xuXHRcdCRwYXJlbnQuZmluZCgnW2RhdGEtYWNmLWZpZWxkLWtleV0nKS5lYWNoKGZ1bmN0aW9uKCl7XG5cblx0XHRcdHJlcV9kYXRhLmFjZl9maWVsZF9rZXlzLnB1c2goICQodGhpcykuYXR0cignZGF0YS1hY2YtZmllbGQta2V5JykgKTtcblxuXHRcdFx0JCh0aGlzKS5wcm9wKCAncmVhZG9ubHknLCB0cnVlICk7XG5cblx0XHRcdGlmICggISAkKHRoaXMpLmlzKCdbZGF0YS1pcy1kby1ub3QtY2hhbmdlPVwidHJ1ZVwiXScgKSApIHtcblx0XHRcdFx0aWYgKCAkKHRoaXMpLmlzKCdbdHlwZT1cInJhZGlvXCJdLFt0eXBlPVwiY2hlY2tib3hcIl0nKSApIHtcblx0XHRcdFx0XHQkKHRoaXMpLnByb3AoICdjaGVja2VkJywgZmFsc2UgKTtcblx0XHRcdFx0fSBlbHNlIGlmICggJCh0aGlzKS5wYXJlbnQoKS5pcygnLmFjZi1xdWljay1lZGl0LWRhdGVfcGlja2VyLCAuYWNmLXF1aWNrLWVkaXQtdGltZV9waWNrZXIsIC5hY2YtcXVpY2stZWRpdC1kYXRlX3RpbWVfcGlja2VyJyApICkge1xuXHRcdFx0XHRcdCQodGhpcykubmV4dCgnW3R5cGU9XCJ0ZXh0XCJdJykucHJvcCggJ3JlYWRvbmx5JywgdHJ1ZSApO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdCQodGhpcykudmFsKCcnKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0JC5wb3N0KCBhamF4dXJsLCByZXFfZGF0YSwgZnVuY3Rpb24oIHJlc3VsdCApIHtcblx0XHRcdHZhciBpLCBrZXksIHZhbHVlLCAkdHIsICRmaWVsZCxcblx0XHRcdFx0c2VsZWN0ZWQ7XG5cblx0XHRcdHZhciBrZXlzID0gW107XG5cdFx0XHQvLyBvbmx5IGtlZXAga2V5cyB0aGF0IGhhdmUgZmllbGRzXG5cdFx0XHQkcGFyZW50LmZpbmQoJ1tkYXRhLWFjZi1maWVsZC1rZXldJykuZWFjaChmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIGtleTtcblx0XHRcdFx0ISR0ciAmJiAoJHRyID0gJCh0aGlzKS5jbG9zZXN0KCd0ci5pbmxpbmUtZWRpdC1wb3N0JykpO1xuXHRcdFx0XHRrZXkgPSAkKHRoaXMpLmRhdGEoJ2FjZi1maWVsZC1rZXknKTtcblx0XHRcdFx0aWYgKCBrZXlzLmluZGV4T2YoIGtleSApID09PSAtMSApIHtcblx0XHRcdFx0XHRrZXlzLnB1c2goa2V5KTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdGZvciAoIGk9MDsgaTxrZXlzLmxlbmd0aDsgaSsrKSB7XG5cblx0XHRcdFx0a2V5ID0ga2V5c1tpXSwgdmFsdWUgPSByZXN1bHRbIGtleSBdO1xuXG5cdFx0XHRcdCRmaWVsZCA9ICQoJ1tkYXRhLWFjZi1maWVsZC1rZXk9XCInK2tleSsnXCJdJyk7XG5cblx0XHRcdFx0Ly8gY29udmVydCBib29sIHRvIGludFxuXHRcdFx0XHRpZiAodHlwZW9mKHZhbHVlKSA9PT0gJ2Jvb2xlYW4nKSB7XG5cdFx0XHRcdFx0dmFsdWUgKj0gMTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdFxuXHRcdFx0XHRpZiAoICRmaWVsZC5pcyggJy5hY2YtY2hlY2tib3gtbGlzdCwgLmFjZi1yYWRpby1saXN0JyApICkge1xuXHRcdFx0XHRcdHNlbGVjdGVkID0gMDtcblx0XHRcdFx0XHRpZiAoICQuaXNBcnJheSggdmFsdWUgKSApIHtcblx0XHRcdFx0XHRcdCQuZWFjaCggdmFsdWUsIGZ1bmN0aW9uKCBpZHgsIHZhbCApIHtcblx0XHRcdFx0XHRcdFx0c2VsZWN0ZWQgKz0gJGZpZWxkLmZpbmQoICdbdmFsdWU9XCInK3ZhbCsnXCJdJyApLnByb3AoICdjaGVja2VkJyx0cnVlKS5sZW5ndGg7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0c2VsZWN0ZWQgKz0gJGZpZWxkLmZpbmQoICdbdmFsdWU9XCInK3ZhbHVlKydcIl0nICkucHJvcCggJ2NoZWNrZWQnLHRydWUpLmxlbmd0aDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKCAkZmllbGQuaXMoJy5vdGhlcicpICYmICEgc2VsZWN0ZWQgKSB7XG5cdFx0XHRcdFx0XHRpZiAoICEhIHZhbHVlICkge1xuXHRcdFx0XHRcdFx0XHQkZmllbGQuZmluZCgnW3ZhbHVlPVwib3RoZXJcIl0nKS5wcm9wKCAnY2hlY2tlZCcsIHRydWUgKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdCRmaWVsZC5maW5kKCdbdHlwZT1cInRleHRcIl0nKS52YWwoJycpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHRcdH0gZWxzZSBpZiAoICEgJGZpZWxkLmlzKCAnW3R5cGU9XCJyYWRpb1wiXSxbdHlwZT1cImNoZWNrYm94XCJdJyApICkge1xuXHRcdFx0XHRcdCRmaWVsZC52YWwoIHZhbHVlICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoICEgJGZpZWxkLmlzKCAnW3R5cGU9XCJwYXNzd29yZFwiXScgKSApIHtcblx0XHRcdFx0XHQkZmllbGQucHJvcCggJ3JlYWRvbmx5JywgZmFsc2UgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICggJGZpZWxkLmlzKFwidGV4dGFyZWFcIikgKSB7XG5cdFx0XHRcdFx0JGZpZWxkLm9uKCdrZXlkb3duIGtleXVwJywgZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRcdFx0XHRcdGlmICggZXZlbnQud2hpY2ggPT0gMTMgKSB7XG5cdFx0XHRcdFx0XHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCAkZmllbGQucGFyZW50KCkuaXMoJy5hY2YtcXVpY2stZWRpdC1kYXRlX3BpY2tlciwgLmFjZi1xdWljay1lZGl0LXRpbWVfcGlja2VyLCAuYWNmLXF1aWNrLWVkaXQtZGF0ZV90aW1lX3BpY2tlcicgKSApIHtcblx0XHRcdFx0XHQkZmllbGQubmV4dCgnW3R5cGU9XCJ0ZXh0XCJdJykucHJvcCggJ3JlYWRvbmx5JywgZmFsc2UgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHR9XG5cblx0XHRcdC8vIGluaXQgY29sb3JwaWNrZXJcblx0XHRcdCRwYXJlbnQuZmluZCgnaW5wdXQuYWNmLXF1aWNrLWVkaXQtY29sb3JfcGlja2VyJykuZWFjaCggZnVuY3Rpb24oIGksIGVsICkge1xuXHRcdFx0XHQkKGVsKS53cENvbG9yUGlja2VyKCk7XG5cdFx0XHR9KVxuXHRcdFx0XG5cdFx0XHQvLyBpbml0IGRhdGVwaWNrZXJcblx0XHRcdCRwYXJlbnQuZmluZCgnLmFjZi1xdWljay1lZGl0LWRhdGVfcGlja2VyJykuZWFjaCggZnVuY3Rpb24oIGksIGVsICkge1xuXG5cdFx0XHRcdGFjZlF1aWNrZWRpdC5kYXRlcGlja2VyLmluaXQoICQoZWwpICk7XG5cblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBpbml0IHRpbWVwaWNrZXJcblx0XHRcdCRwYXJlbnQuZmluZCgnLmFjZi1xdWljay1lZGl0LXRpbWVfcGlja2VyJykuZWFjaCggZnVuY3Rpb24oIGksIGVsICkge1xuXG5cdFx0XHRcdGFjZlF1aWNrZWRpdC50aW1lcGlja2VyLmluaXQoICQoZWwpICk7XG5cblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBpbml0IGRhdGV0aW1waWNrZXJcblx0XHRcdCRwYXJlbnQuZmluZCgnLmFjZi1xdWljay1lZGl0LWRhdGVfdGltZV9waWNrZXInKS5lYWNoKCBmdW5jdGlvbiggaSwgZWwgKSB7XG5cblx0XHRcdFx0YWNmUXVpY2tlZGl0LmRhdGV0aW1lcGlja2VyLmluaXQoICQoZWwpICk7XG5cblx0XHRcdH0pO1xuXG5cdFx0XHRpZiggJCgnYm9keSA+ICN1aS1kYXRlcGlja2VyLWRpdicpLmxlbmd0aCA+IDAgKSB7XG5cdFx0XHRcdCQoJ2JvZHkgPiAjdWktZGF0ZXBpY2tlci1kaXYnKS53cmFwKCc8ZGl2IGNsYXNzPVwiYWNmLXVpLWRhdGVwaWNrZXJcIiAvPicpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cdFxuXHRhY2ZRdWlja2VkaXQuZGF0ZXBpY2tlciA9IHtcblx0XHRpbml0OiBmdW5jdGlvbiggJHdyYXAgKSB7XG5cdFx0XHR2YXIgJGhpZGRlblx0XHQ9ICR3cmFwLmZpbmQoICdbdHlwZT1cImhpZGRlblwiXScgKSxcblx0XHRcdFx0JGlucHV0XHRcdD0gJHdyYXAuZmluZCggJ1t0eXBlPVwidGV4dFwiXScgKSxcblx0XHRcdFx0YWx0Rm9ybWF0XHQ9ICd5eW1tZGQnXG5cdFx0XHRcdGFyZ3NcdFx0PSB7XG5cdFx0XHRcdFx0ZGF0ZUZvcm1hdFx0XHQ6ICR3cmFwLmRhdGEoJ2RhdGVfZm9ybWF0JyksXG5cdFx0XHRcdFx0YWx0Rm9ybWF0XHRcdDogYWx0Rm9ybWF0LFxuXHRcdFx0XHRcdGFsdEZpZWxkXHRcdDogJGhpZGRlbixcblx0XHRcdFx0XHRjaGFuZ2VZZWFyXHRcdDogdHJ1ZSxcblx0XHRcdFx0XHR5ZWFyUmFuZ2VcdFx0OiBcIi0xMDA6KzEwMFwiLFxuXHRcdFx0XHRcdGNoYW5nZU1vbnRoXHRcdDogdHJ1ZSxcblx0XHRcdFx0XHRzaG93QnV0dG9uUGFuZWxcdDogdHJ1ZSxcblx0XHRcdFx0XHRmaXJzdERheVx0XHQ6ICR3cmFwLmRhdGEoJ2ZpcnN0X2RheScpXG5cdFx0XHRcdH0sXG5cdFx0XHRcdGRhdGVcdFx0PSAkLmRhdGVwaWNrZXIucGFyc2VEYXRlKCBhbHRGb3JtYXQsICRoaWRkZW4udmFsKCkgICk7XG5cblx0XHRcdCRpbnB1dC5kYXRlcGlja2VyKCBhcmdzICkuZGF0ZXBpY2tlciggJ3NldERhdGUnLCBkYXRlICkub24oJ2JsdXInLGZ1bmN0aW9uKCl7XG5cdFx0XHRcdGlmICggISAkKHRoaXMpLnZhbCgpICkge1xuXHRcdFx0XHRcdCRoaWRkZW4udmFsKCcnKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSxcblx0fTtcblxuXHRhY2ZRdWlja2VkaXQudGltZXBpY2tlciA9IHtcblx0XHRpbml0OiBmdW5jdGlvbiggJHdyYXAgKSB7XG5cdFx0XHR2YXIgJGhpZGRlblx0XHRcdD0gJHdyYXAuZmluZCggJ1t0eXBlPVwiaGlkZGVuXCJdJyApLFxuXHRcdFx0XHQkaW5wdXRcdFx0XHQ9ICR3cmFwLmZpbmQoICdbdHlwZT1cInRleHRcIl0nICksXG5cdFx0XHRcdGFsdFRpbWVGb3JtYXRcdD0gJ0hIOm1tOnNzJyxcblx0XHRcdFx0YXJnc1x0XHRcdD0ge1xuXHRcdFx0XHRcdHRpbWVGb3JtYXRcdFx0XHQ6ICR3cmFwLmRhdGEoJ3RpbWVfZm9ybWF0JyksXG5cdFx0XHRcdFx0YWx0VGltZUZvcm1hdFx0XHQ6IGFsdFRpbWVGb3JtYXQsXG5cdFx0XHRcdFx0YWx0RmllbGRcdFx0XHQ6ICRoaWRkZW4sXG5cdFx0XHRcdFx0YWx0RmllbGRUaW1lT25seVx0OiBmYWxzZSxcblx0XHRcdFx0XHRzaG93QnV0dG9uUGFuZWxcdFx0OiB0cnVlLFxuXHRcdFx0XHRcdGNvbnRyb2xUeXBlXHRcdFx0OiAnc2VsZWN0Jyxcblx0XHRcdFx0XHRvbmVMaW5lXHRcdFx0XHQ6IHRydWVcblx0XHRcdFx0fSxcblx0XHRcdFx0dGltZSBcdFx0XHQ9ICQuZGF0ZXBpY2tlci5wYXJzZVRpbWUoIGFsdFRpbWVGb3JtYXQsICRoaWRkZW4udmFsKCkgKTtcblxuXHRcdFx0JGlucHV0LnRpbWVwaWNrZXIoIGFyZ3MgKS5vbignYmx1cicsZnVuY3Rpb24oKXtcblx0XHRcdFx0aWYgKCAhICQodGhpcykudmFsKCkgKSB7XG5cdFx0XHRcdFx0JGhpZGRlbi52YWwoJycpO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdGlmICggJGhpZGRlbi52YWwoKSApIHtcblx0XHRcdFx0JGlucHV0LnZhbCggJC5kYXRlcGlja2VyLmZvcm1hdFRpbWUoICR3cmFwLmRhdGEoJ3RpbWVfZm9ybWF0JyksIHRpbWUgKSApXG5cdFx0XHR9XG5cdFx0fSxcblx0XG5cdH07XG5cblx0XG5cdGFjZlF1aWNrZWRpdC5kYXRldGltZXBpY2tlciA9IHtcblx0XHRpbml0OiBmdW5jdGlvbiggJHdyYXAgKSB7XG5cdFx0XHR2YXIgJGhpZGRlblx0XHRcdD0gJHdyYXAuZmluZCggJ1t0eXBlPVwiaGlkZGVuXCJdJyApLFxuXHRcdFx0XHQkaW5wdXRcdFx0XHQ9ICR3cmFwLmZpbmQoICdbdHlwZT1cInRleHRcIl0nICksXG5cdFx0XHRcdGFsdEZvcm1hdFx0XHQ9ICd5eS1tbS1kZCdcblx0XHRcdFx0YWx0VGltZUZvcm1hdFx0PSAnSEg6bW06c3MnLFxuXHRcdFx0XHRhcmdzXHRcdFx0PSB7XG5cdFx0XHRcdFx0YWx0RmllbGRcdFx0XHQ6ICRoaWRkZW4sXG5cdFx0XHRcdFx0ZGF0ZUZvcm1hdFx0XHRcdDogJHdyYXAuZGF0YSgnZGF0ZV9mb3JtYXQnKSxcblx0XHRcdFx0XHRhbHRGb3JtYXRcdFx0XHQ6IGFsdEZvcm1hdCxcblx0XHRcdFx0XHR0aW1lRm9ybWF0XHRcdFx0OiAkd3JhcC5kYXRhKCd0aW1lX2Zvcm1hdCcpLFxuXHRcdFx0XHRcdGFsdFRpbWVGb3JtYXRcdFx0OiBhbHRUaW1lRm9ybWF0LFxuXHRcdFx0XHRcdGFsdEZpZWxkVGltZU9ubHlcdDogZmFsc2UsXG5cdFx0XHRcdFx0Y2hhbmdlWWVhclx0XHRcdDogdHJ1ZSxcblx0XHRcdFx0XHR5ZWFyUmFuZ2VcdFx0XHQ6IFwiLTEwMDorMTAwXCIsXG5cdFx0XHRcdFx0Y2hhbmdlTW9udGhcdFx0XHQ6IHRydWUsXG5cdFx0XHRcdFx0c2hvd0J1dHRvblBhbmVsXHRcdDogdHJ1ZSxcblx0XHRcdFx0XHRmaXJzdERheVx0XHRcdDogJHdyYXAuZGF0YSgnZmlyc3RfZGF5JyksXG5cdFx0XHRcdFx0Y29udHJvbFR5cGVcdFx0XHQ6ICdzZWxlY3QnLFxuXHRcdFx0XHRcdG9uZUxpbmVcdFx0XHRcdDogdHJ1ZVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRkYXRldGltZSBcdFx0XHQ9ICQuZGF0ZXBpY2tlci5wYXJzZURhdGVUaW1lKCBhbHRGb3JtYXQsIGFsdFRpbWVGb3JtYXQsICRoaWRkZW4udmFsKCkgKTtcblxuXHRcdFx0JGlucHV0LmRhdGV0aW1lcGlja2VyKCBhcmdzICkuZGF0ZXBpY2tlciggJ3NldERhdGUnLCBkYXRldGltZSApLm9uKCdibHVyJyxmdW5jdGlvbigpe1xuXHRcdFx0XHRpZiAoICEgJCh0aGlzKS52YWwoKSApIHtcblx0XHRcdFx0XHQkaGlkZGVuLnZhbCgnJyk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0sXG5cdFxuXHR9O1xuXG5cdFxuXHRpZiAoICd1bmRlZmluZWQnICE9PSB0eXBlb2YgaW5saW5lRWRpdFBvc3QgKSB7XG5cdFx0Ly8gd2UgY3JlYXRlIGEgY29weSBvZiB0aGUgV1AgaW5saW5lIGVkaXQgcG9zdCBmdW5jdGlvblxuXHRcdHZhciBfd3BfaW5saW5lX2VkaXRfcG9zdCA9IGlubGluZUVkaXRQb3N0LmVkaXQ7XG5cdFx0Ly8gYW5kIHRoZW4gd2Ugb3ZlcndyaXRlIHRoZSBmdW5jdGlvbiB3aXRoIG91ciBvd24gY29kZVxuXHRcdGlubGluZUVkaXRQb3N0LmVkaXQgPSBmdW5jdGlvbiggaWQgKSB7XG5cdFx0XHR2YXIgb2JqZWN0X2lkLCAkdHI7XG5cdFx0XHQvLyBcImNhbGxcIiB0aGUgb3JpZ2luYWwgV1AgZWRpdCBmdW5jdGlvblxuXHRcdFx0Ly8gd2UgZG9uJ3Qgd2FudCB0byBsZWF2ZSBXb3JkUHJlc3MgaGFuZ2luZ1xuXHRcdFx0X3dwX2lubGluZV9lZGl0X3Bvc3QuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXG5cdFx0XHQvLyBnZXQgdGhlIHBvc3QgSURcblx0XHRcdG9iamVjdF9pZCA9IDA7XG5cdFx0XHRpZiAoIHR5cGVvZiggaWQgKSA9PT0gJ29iamVjdCcgKSB7XG5cdFx0XHRcdG9iamVjdF9pZCA9IHBhcnNlSW50KCB0aGlzLmdldElkKCBpZCApICk7XG5cdFx0XHR9XG5cdFx0XHQkdHIgPSAkKCcjZWRpdC0nICsgb2JqZWN0X2lkICk7XG5cdFx0XHRnZXRfYWNmX3Bvc3RfZGF0YSggb2JqZWN0X2lkICwgJCgnI2VkaXQtJyArIG9iamVjdF9pZCApICk7XG5cblx0XHRcdGJpbmRWYWxpZGF0aW9uKCAkdHIuZmluZCgnYnV0dG9uLnNhdmUnKSwgb2JqZWN0X2lkICk7XG5cdFx0fTtcblx0fVxuXG5cdGlmICggJ3VuZGVmaW5lZCcgIT09IHR5cGVvZiBpbmxpbmVFZGl0VGF4ICkge1xuXG5cdFx0dmFyIF93cF9pbmxpbmVfZWRpdF90YXggPSBpbmxpbmVFZGl0VGF4LmVkaXQ7XG5cblx0XHRpbmxpbmVFZGl0VGF4LmVkaXQgPSBmdW5jdGlvbiggaWQgKSB7XG5cdFx0XHR2YXIgb2JqZWN0X2lkLCAkdHIsXG5cdFx0XHRcdHRheCA9ICQoJ2lucHV0W25hbWU9XCJ0YXhvbm9teVwiXScpLnZhbCgpO1xuXG5cdFx0XHRfd3BfaW5saW5lX2VkaXRfdGF4LmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblxuXHRcdFx0Ly8gZ2V0IHRoZSBwb3N0IElEXG5cdFx0XHRvYmplY3RfaWQgPSAwO1xuXHRcdFx0aWYgKCB0eXBlb2YoIGlkICkgPT09ICdvYmplY3QnICkge1xuXHRcdFx0XHRvYmplY3RfaWQgPSBwYXJzZUludCggdGhpcy5nZXRJZCggaWQgKSApO1xuXHRcdFx0fVxuXHRcdFx0JHRyID0gJCgnI2VkaXQtJyArIG9iamVjdF9pZCApO1xuXHRcdFx0Z2V0X2FjZl9wb3N0X2RhdGEoIHRheCArICdfJyArIG9iamVjdF9pZCAsICR0ciApO1xuXG5cdFx0XHRiaW5kVmFsaWRhdGlvbiggJHRyLmZpbmQoJ2J1dHRvbi5zYXZlJyksIG9iamVjdF9pZCApO1xuXHRcdH07XG5cdH1cblxuXHRhY2YudmFsaWRhdGlvbi5lcnJvcl9jbGFzcyA9ICdmb3JtLWludmFsaWQnO1xuXG5cdGZ1bmN0aW9uIGJpbmRWYWxpZGF0aW9uKCAkYnV0dG9uLCBvYmplY3RfaWQgKSB7XG5cdFx0dmFyICRmb3JtID0gJGJ1dHRvbi5jbG9zZXN0KCdmb3JtJyk7XG5cbi8vIFx0XHRhY2YudXBkYXRlKCdhamF4dXJsJywgYWpheHVybCApO1xuLy8gXHRcdGFjZi51cGRhdGUoJ25vbmNlJywgJGZvcm0uZmluZCgnW25hbWU9XCJub25jZVwiXScpLnZhbCgpICk7XG4gXHRcdGFjZi51cGRhdGUoJ3Bvc3RfaWQnLCBvYmplY3RfaWQgKTtcblxuXHRcdCRidXR0b24uY2xpY2soIGZ1bmN0aW9uKGUpIHtcblxuXHRcdFx0Ly8gYmFpbCBlYXJseSBpZiBub3QgYWN0aXZlXG5cdFx0XHRpZiggIWFjZi52YWxpZGF0aW9uLmFjdGl2ZSApIHtcblx0XHRcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcblx0XHRcdH1cblxuXHRcdFx0Ly8gaWdub3JlIHZhbGlkYXRpb24gKG9ubHkgaWdub3JlIG9uY2UpXG5cdFx0XHRpZiggYWNmLnZhbGlkYXRpb24uaWdub3JlICkge1xuXHRcdFx0XHRhY2YudmFsaWRhdGlvbi5pZ25vcmUgPSAwO1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gc3RvcCBXUCBKUyB2YWxpZGF0aW9uXG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0ZS5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcblx0XHRcblxuXHRcdFx0Ly8gc3RvcmUgc3VibWl0IHRyaWdnZXIgc28gaXQgd2lsbCBiZSBjbGlja2VkIGlmIHZhbGlkYXRpb24gaXMgcGFzc2VkXG5cdFx0XHRhY2YudmFsaWRhdGlvbi4kdHJpZ2dlciA9ICQodGhpcyk7XG5cdFx0XHRcdFx0XG5cdFx0XHQvLyBydW4gdmFsaWRhdGlvblxuXHRcdFx0YWNmLnZhbGlkYXRpb24uZmV0Y2goICRmb3JtICk7XG5cblx0XHRcdC8vIHN0b3AgYWxsIG90aGVyIGNsaWNrIGV2ZW50cyBvbiB0aGlzIGlucHV0XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fSk7XG5cblx0XHQkYnV0dG9uLmRhdGEoJ2V2ZW50cycpLmNsaWNrLnJldmVyc2UoKTtcblx0fVxuXG5cdCQoZG9jdW1lbnQpLm9uKCAnY2xpY2snICwgJy5idWxrYWN0aW9ucyAuYnV0dG9uLmFjdGlvbicgLCBmdW5jdGlvbiggZSApIHtcblx0XHR2YXIgcG9zdF9pZHMgPSBbXTtcblxuXHRcdCQoICcjYnVsay1lZGl0ICNidWxrLXRpdGxlcycgKS5jaGlsZHJlbigpLmVhY2goIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRwb3N0X2lkcy5wdXNoKCAkKCB0aGlzICkuYXR0ciggJ2lkJyApLnJlcGxhY2UoIC9eKHR0bGUpL2ksICcnICkgKTtcblxuXHRcdH0pO1xuXG5cdFx0Z2V0X2FjZl9wb3N0X2RhdGEoIHBvc3RfaWRzICwgJCggJyNidWxrLWVkaXQnICkgKTtcblxuXHR9KVxuXHQub24oJ2NoYW5nZScsICcuYWNmLXJhZGlvLWxpc3Qub3RoZXIgaW5wdXRbdHlwZT1cInJhZGlvXCJdJywgZnVuY3Rpb24oZSkge1xuXG5cdFx0dmFyICR0aGlzID0gJCh0aGlzKSwgXG5cdFx0XHQkbGlzdCA9ICR0aGlzLmNsb3Nlc3QoJy5hY2YtcmFkaW8tbGlzdCcpLCBcblx0XHRcdGlzX290aGVyID0gJHRoaXMudmFsKCkgPT0gJ290aGVyJyxcblx0XHRcdCRvdGhlciA9ICRsaXN0LmZpbmQoJ1t0eXBlPVwidGV4dFwiXScpLnByb3AoJ2Rpc2FibGVkJywgISBpc19vdGhlciApO1xuXG5cdFx0ISEgaXNfb3RoZXIgJiYgJG90aGVyLmZvY3VzKCk7XG5cblx0fSlcblx0Lm9uKCAnY2hhbmdlJywgJ1tkYXRhLWlzLWRvLW5vdC1jaGFuZ2U9XCJ0cnVlXCJdJywgZnVuY3Rpb24oKXtcblx0XHR2YXIgJHNlbGYgPSAkKHRoaXMpLFxuXHRcdFx0bmFtZSA9ICRzZWxmLmF0dHIoJ25hbWUnKSxcblx0XHRcdCRsaXN0ID0gJHNlbGYuY2xvc2VzdCgnLmFjZi1jaGVja2JveC1saXN0JyksXG5cdFx0XHQkaXRlbXM7XG5cdFx0aWYgKCAkbGlzdC5sZW5ndGggKSB7XG5cdFx0XHQkaXRlbXMgPSAkbGlzdC5maW5kKCdbdHlwZT1cImNoZWNrYm94XCJdOm5vdChbZGF0YS1pcy1kby1ub3QtY2hhbmdlXSknKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0JGl0ZW1zID0gJHNlbGYuY2xvc2VzdCgnLmFjZi1maWVsZCcpLmZpbmQoJ1tuYW1lPVwiJytuYW1lKydcIl06bm90KFtkYXRhLWlzLWRvLW5vdC1jaGFuZ2VdKScpXG5cdFx0fVxuXG5jb25zb2xlLmxvZygkaXRlbXMpO1xuXHRcdCRpdGVtcy5wcm9wKCAnZGlzYWJsZWQnLCAkc2VsZi5wcm9wKCdjaGVja2VkJykgKTtcblx0fSlcblx0Lm9uKCAnY2xpY2snLCAnLmlubGluZS1lZGl0LWNvbCAuc2VsZWN0LW1lZGlhJywgZnVuY3Rpb24oZSkge1xuXHRcdHZhciBzZWxmID0gdGhpcyxcblx0XHRcdCRoaWRkZW4gPSAkKHNlbGYpLnBhcmVudCgnLmFjZi1pbnB1dC13cmFwJykuZmluZCgnW3R5cGU9XCJoaWRkZW5cIl0nKSxcblx0XHRcdCRmaWVsZCA9ICQodGhpcykuY2xvc2VzdCgnLmFjZi1maWVsZCcpLFxuXHRcdFx0cG9zdF9pZCA9IGFjZi5nZXQoJ3Bvc3RfaWQnKSxcblx0XHRcdG1lZGlhRnJhbWVPcHRzO1xuXG5cdFx0bWVkaWFGcmFtZU9wdHMgPSB7XG5cdFx0XHRmaWVsZFx0XHQ6ICRoaWRkZW4uYXR0cignZGF0YS1hY2YtZmllbGQta2V5JyksXG5cdFx0XHRtdWx0aXBsZVx0OiBmYWxzZSxcblx0XHRcdHBvc3RfaWRcdFx0OiBwb3N0X2lkLFxuXHRcdFx0bGlicmFyeVx0XHQ6ICRoaWRkZW4uYXR0cignZGF0YS1saWJyYXJ5JyksXG5cdFx0XHRtb2RlXHRcdDonc2VsZWN0Jyxcblx0XHRcdHNlbGVjdFx0XHQ6IGZ1bmN0aW9uICggYXR0YWNobWVudCwgaSApIHtcblx0XHRcdFx0aWYgKCAhIGF0dGFjaG1lbnQgKSB7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHZhciAkaGlkZGVuID0gJChzZWxmKS5wYXJlbnQoJy5hY2YtaW5wdXQtd3JhcCcpLmZpbmQoJ1t0eXBlPVwiaGlkZGVuXCJdJyksXG5cdFx0XHRcdFx0bWVkaWFfaWQgPSBhdHRhY2htZW50LmdldCgnaWQnKTtcblxuXHRcdFx0XHQkaGlkZGVuLnZhbCggbWVkaWFfaWQgKTtcblx0XHRcdH1cblx0XHR9O1xuXG5cblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XG5cdFx0XG5cdFx0aWYgKCAkaGlkZGVuLmRhdGEoJ21pbWVfdHlwZXMnKSApIHtcblx0XHRcdG1lZGlhRnJhbWVPcHRzLm1pbWVfdHlwZXMgPSAkaGlkZGVuLmRhdGEoJ21pbWVfdHlwZXMnKTtcblx0XHR9XG5cdFx0aWYgKCAkZmllbGQuaXMoJ1tkYXRhLWZpZWxkLXR5cGU9XCJpbWFnZVwiXScpICkge1xuXHRcdFx0bWVkaWFGcmFtZU9wdHMudHlwZSA9ICdpbWFnZSc7XG5cdFx0fSBlbHNlIHtcblx0XHRcdG1lZGlhRnJhbWVPcHRzLnR5cGUgPSAnJztcblx0XHR9XG5cblx0XHQvLyBDcmVhdGUgYSBuZXcgbWVkaWEgZnJhbWVcblx0XHRtZWRpYV9mcmFtZSA9IGFjZi5tZWRpYS5wb3B1cCggbWVkaWFGcmFtZU9wdHMgKTtcblxuXG5cdFx0Ly8gc2V0IHBvc3QgaWQsIHNvIG5ldyB1cGxvYWRzIGFyZSBhdHRhY2hlZCB0byBlZGl0ZWQgcG9zdFxuXHRcdGlmICggYWNmLmlzc2V0KHdpbmRvdywnd3AnLCdtZWRpYScsJ3ZpZXcnLCdzZXR0aW5ncycsJ3Bvc3QnKSAmJiAkLmlzTnVtZXJpYyhwb3N0X2lkKSApIHtcblx0XHRcdFxuXHRcdFx0d3AubWVkaWEudmlldy5zZXR0aW5ncy5wb3N0LmlkID0gcG9zdF9pZDtcblx0XHRcdFx0XG5cdFx0fVxuXG5cdH0pXG5cdC5vbiggJ2NsaWNrJywgJy5pbmxpbmUtZWRpdC1jb2wgLnJlbW92ZS1tZWRpYScsIGZ1bmN0aW9uKGUpIHtcblx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0dmFyICRoaWRkZW4gPSAkKHRoaXMpLnBhcmVudCgpLmZpbmQoJ1t0eXBlPVwiaGlkZGVuXCJdJyk7XG5cdFx0JGhpZGRlbi52YWwoJycpO1xuXHRcdGNvbnNvbGUubG9nKCRoaWRkZW4pO1xuXHR9KTtcbn0pKGpRdWVyeSk7IiwiKGZ1bmN0aW9uKCQpIHtcblx0JCgnLmFjZi1xZWYtZ2FsbGVyeS1jb2wnKS5vbignbW91c2Vtb3ZlJyxmdW5jdGlvbihlKXtcblx0XHR2YXIgJHRoaXNcdD0gJCh0aGlzKSxcblx0XHRcdCRpbWdcdD0gJCh0aGlzKS5maW5kKCdpbWcnKVxuXHRcdFx0eFx0XHQ9IGUub2Zmc2V0WCxcblx0XHRcdG51bVx0XHQ9ICRpbWcubGVuZ3RoLFxuXHRcdFx0c3RlcFx0PSAkKHRoaXMpLndpZHRoKCkgLyBudW07XG5cblx0XHQkaW1nLmVhY2goIGZ1bmN0aW9uKGksZWwpIHtcblx0XHRcdGlmICh4ID49IHN0ZXAqaSkge1xuXHRcdFx0XHQkKGVsKS5zaG93KCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHQkKGVsKS5oaWRlKCk7XG5cdFx0XHR9XG5cdFx0fSApO1xuXHR9KTtcbn0pKGpRdWVyeSk7Il19
